<!DOCTYPE html>
<html>
<head>
    <title>Submit Ingredients</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h2>Submit Ingredients</h2>

    <form method="POST" onsubmit="return prepareData();">
        <label>Add one ingredient at a time:</label>
        <input type="text" id="ingredient-input" placeholder="e.g. Onion">
        <button type="button" onclick="addIngredient()">Add</button>

        <ul id="ingredient-list"></ul>

        <input type="hidden" name="ingredients" id="ingredients-hidden">

        <label>Select region preference:</label>
        <select name="region">
            <option value="">Any</option>
            <option value="NorthIn">North Indian</option>
            <option value="SouthIn">South Indian</option>
        </select>

        <button type="submit">Submit</button>
    </form>

    <script>
        let ingredients = [];

        function addIngredient() {
            const input = document.getElementById('ingredient-input');
            const value = input.value.trim().toLowerCase();
            if (value && !ingredients.includes(value)) {
                ingredients.push(value);
                updateList();
            }
            input.value = '';
        }

        function removeIngredient(index) {
            ingredients.splice(index, 1);
            updateList();
        }

        function updateList() {
            const ul = document.getElementById('ingredient-list');
            ul.innerHTML = '';
            ingredients.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `${item} <button onclick="removeIngredient(${index})">‚ùå</button>`;
                ul.appendChild(li);
            });
        }

        function prepareData() {
            document.getElementById('ingredients-hidden').value = JSON.stringify(ingredients);
            return true;
        }
    </script>
</body>
</html>
